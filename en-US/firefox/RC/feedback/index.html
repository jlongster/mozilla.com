<?php
    // The $body_* variables are for compatibility with pre-existing css
    $page_title = 'Firefox 4 RC';
    $body_id    = 'firefox-beta-feedback';

    $extra_headers = <<<EXTRA_HEADERS
      <link rel="stylesheet" type="text/css" href="{$config['static_prefix']}/style/email-form.css"  />
      <link rel="stylesheet" type="text/css" href="{$config['static_prefix']}/style/firefox/beta/4/main.css"  />
EXTRA_HEADERS;

    $extra_footers = <<<EXTRA_FOOTERS
        <script type="text/javascript" src="{$config['static_prefix']}/js/mozilla-input-placeholder.js"></script>
EXTRA_FOOTERS;

    include_once "{$config['file_root']}/{$lang}/includes/header.inc.php";
    require_once "{$config['file_root']}/includes/email/forms.php";

    $form = new ExtraNewsletterForm('FIREFOX_BETA_NEWS', $_POST);
    $status = '';
    if ($form->save()) {
        $status = 'success';
    } elseif ($form->error) {
        $status = 'error-'. $form->error;
    }
?>

<div id="main-feature">
    <div id="feature-contents">
        <h2><a href="../"><img src="<?=$config['static_prefix']?>/img/firefox/beta/4/title.png" alt="Firefox 4 RC" /></a></h2>
        <h3>Help Wanted</h3>
        <p>We’re building a Firefox that’s faster, lighter and full of ways to help you browse. But, we can’t do it without your feedback.
</p>
    </div>


</div>

<?=buildFirefoxBetaSubPageMenu($lang, 'feedback');?>

<div id="main-content">

    <div class="sub-feature" id="beta-feedback">
        <?=buildPlatformImage('/img/firefox/beta/4/feedback-button.png', 'Firefox Button screenshot')?>
        <h2>Tell Us What You Think</h2>
        <h3>Provide Instant Feedback</h3>
        <p>To submit your feedback, go to our help menu and click the submit feedback option to give us immediate input about the new Firefox 4 Release Candidate (RC).</p>
    </div>

    <div class="sub-feature" id="beta-developers">
        <h2 class="divider">Developers: We Need You</h2>
        <h3>Share Your Ideas</h3>
        <p>What do you think about the <a href="../features/">new developer features</a> in the new Firefox 4 RC?</p>
        <p><a href="https://firefox.uservoice.com/" onclick="UserVoice.Popin.show(uservoiceOptions); return false;">Visit our Feedback Forum.</a></p>
        <h3>File Technical Bugs</h3>
        <img src="<?=$config['static_prefix']?>/img/firefox/beta/4/bugzilla.png" alt="Bugzilla logo" />
        <p>If you’re a Bugzilla whiz, file a bug if you encounter specific problems while browsing.</p>
        <p class="last"><a href="https://bugzilla.mozilla.org/enter_bug.cgi?alias=&amp;component=General&amp;form_name=enter_bug&amp;keywords=&amp;op_sys=All&amp;product=Firefox&amp;rep_platform=All&amp;status_whiteboard=%5Bfrom-rc-tester%5D&amp;target_milestone=---&amp;version=Trunk">File a Firefox 4 RC Bug</a></p>
    </div>

    <div id="up-to-date" class="sub-feature">
        <h4>Spread the Word</h4>
        <ul>
            <li id="link-twitter"><a href="http://twitter.com/firefox">Follow us on Twitter</a></li>
            <li id="link-facebook"><a href="http://www.facebook.com/Firefox?v=wall">Visit us on Facebook</a></li>
            <li id="link-blog"><a href="http://blog.mozilla.com/">Read the Mozilla Blog</a></li>
        </ul>
    </div>

    <div id="support" class="sub-feature">
        <h4>Need Help?</h4>
        <p><a href="https://support.mozilla.com/"><img src="<?=$config['static_prefix']?>/img/firefox/beta/4/firstrun/support.png" alt="Support icon" />Our support pages</a> have answers and advice specifically for the Firefox 4 RC.</p>
    </div>

    <div id="main-content-footer"></div>
</div>

<div id="sidebar">
    <div class="sub-feature stripes" id="beta-updates">
        <h3>Stay Up To Date</h3>
        <ul id="email-form" class="<?= $status ?>">
          <li id="form-pane">
            <form method="post">
              <p class="intro">Subscribe to receive Firefox RC news, events and information via email.</p>
              <p id="email-error"><span>Whoops! Be sure to enter a valid email address.</span></p>
              <p id="privacy-error"><span>Please read the Mozilla Privacy Policy and agree by checking the box.</span></p>


              <div id="email-field">
                <span class="error-wrapper">
                  <input name="email" type="email" 
                         placeholder="Your Email Address" 
                         id="email" value="<?= $form->get('email') ?>">
                </span>
              </div>

              <div class="field" id="format-field">
                <?php
                    $html_format = 'checked="checked"';
                    $text_format = '';
                    if ($form->get('format') == 'text') {
                        $text_format = 'checked="checked"';
                        $html_format = '';
                    }
                ?>
                <div class="field-radios">
                  <label for="html-format">HTML</label>
                  <input type="radio" name="format" id="html-format" value="html" <?= $html_format?>>
                  <label for="text-format">Text</label>
                  <input type="radio" name="format" id="text-format" value="text" <?= $text_format?>>
                </div>
              </div>

              <div id="privacy-field">
                <label for="privacy-check" id="privacy-check-label">
                  <? $privacy = $form->get('privacy') ? 'checked="checked"' : '' ?>
                  <span class="error-wrapper input">
                    <input type="checkbox" id="privacy-check" 
                           name="privacy" <?= $privacy ?>>
                  </span>

                  <span class="title">
                    I agree to the 
                    <a href="/en-US/privacy-policy">Privacy Policy</a> 
                    <span class="footnote">
                      (we will only send you Mozilla-related information).
                    </span>
                  </span>
                </label>
              </div>

              <div id="extra-news-field">
                <? $extra_news = $form->get('extra_news') ? 'checked="checked"' : '' ?>
                <label for="extra-news-check" id="extra-news-check-label">
                  <span class="input">
                    <input type="checkbox" name="extra_news" 
                           id="extra-news-check" <?= $extra_news ?>>
                  </span>

                  <span class="title">
                    Please also occasionally send me Mozilla news, 
                    Firefox tips &amp; tricks, and other Mozilla information.
                  </span>
                </label>
              </div>

              <input name="submit" type="submit" value="Subscribe »" id="subscribe">
            </form>
          </li>
          <li id="success-pane">
            <h3>Thanks for Subscribing!</h3>
            <p>
              We look forward to soon begin sharing tips &amp; tricks on 
              getting the most out of Firefox, as well as exciting news about 
              Mozilla and how we’re working to create a better Web.
            </p>
          </li>
        </ul>
    </div>
    <div id="sub-content-footer"></div>
</div>


<script>
  var uservoiceOptions = {
    key: 'firefox',
    host: 'firefox.uservoice.com', 
    forum: '57440',
    lang: 'en',
    showTab: false
  };
  function _loadUserVoice() {
    var s = document.createElement('script');
    s.src = ("https:" == document.location.protocol ? "https://" : "http://") + "cdn.uservoice.com/javascripts/widgets/tab.js";
    document.getElementsByTagName('head')[0].appendChild(s);
  }
  _loadSuper = window.onload;
  window.onload = (typeof window.onload != 'function') ? _loadUserVoice : function() { _loadSuper(); _loadUserVoice(); };
</script>

<?php
    include_once "{$config['file_root']}/{$lang}/includes/footer.inc.php";
?>
