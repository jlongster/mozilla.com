<?php
$page_title = 'Welcome to Firefox';

include_once "{$config['file_root']}/includes/headers/3.6/firstrun.inc.php";

include_once "{$config['file_root']}/{$lang}/includes/headers/3.6/portal-pages.inc.php";
?>

<div id="main-feature">
    <h1><img src="<?php echo min_inline_image('/img/firefox/3.6/firstrun/title.png')?>" alt="Firefox 3.6" id="title-logo" /></h1>
</div>

<div id="main-content">

    <div id="intro">
        <h2>Welcome!</h2>
        <p>Firefox is created by Mozilla, a non-profit organization dedicated to promoting openness, innovation and opportunity on the Web. Simply put, we want to make the Web better for everyone (including you, of course).</p>
        <p>Thanks for your support, and happy browsing!</p>
    </div>

    <div id="sidebar">

        <p>Here are some really easy things you can do to get started:</p>

        <ul>
            <li id="sidebar-personas">
                <a href="http://www.getpersonas.com/gallery?source=fxfirstrun"
                   onclick="dcsMultiTrack('DCS.dcssip', 'www.getpersonas.com',
                                          'DCS.dcsuri', '/gallery',
                                          'WT.ti', 'Link: Personas',
                                          'WT.dl', 99,
                                          'WT.nv', 'Content',
                                          'WT.ac', 'Personas');">
                    Decorate your Firefox with <span class="highlight">Personas <span class="arrow">»</span></span>
                </a>
            </li>
            <li id="sidebar-addons">
                <a href="https://addons.mozilla.org/en-US/firefox/?src=fxfirstrun"
                   onclick="dcsMultiTrack('DCS.dcssip', 'addons.mozilla.org',
                                          'DCS.dcsuri', '/en-US/firefox/',
                                          'WT.ti', 'Link: Add-Ons',
                                          'WT.dl', 99,
                                          'WT.nv', 'Content',
                                          'WT.ac', 'Addons');">
                    Browse better with <span class="highlight">Add-ons <span class="arrow">»</span></span>
                </a>
            </li>
            <li id="sidebar-mobile">
                <a href="/<?=$lang?>/mobile/?source=firstrun"
                   onclick="dcsMultiTrack('DCS.dcssip', 'www.mozilla.com',
                                          'DCS.dcsuri', '/<?=$lang?>/mobile/',
                                          'WT.ti', 'Link: Mobile',
                                          'WT.dl', 99,
                                          'WT.nv', 'Content',
                                          'WT.ac', 'Mobile');">
                    Get Firefox on your <span class="highlight">mobile <span class="arrow">»</span></span>
                </a>
            </li>
        </ul>

    </div>

</div>

<div id="footer">

    <div class="sub-feature" id="connect">

<?php
    $newsletter_wt_subscribe_uri = '/button/firstrun/newsletter_subscribe.html';
    $newsletter_wt_subscribe_ti = 'First%20Run%20Newsletter%20Subscribe';
    $newsletter_wt_blade_uri = '/button/firstrun/newsletter_blade.html';
    $newsletter_wt_blade_ti = 'First%20Run%20Newsletter%20Blade';

    require_once "{$config['file_root']}/includes/regions.php";
    require_once "{$config['file_root']}/includes/email/forms.php";

    $newsletter_wt_subscribe_uri = isset($newsletter_wt_subscribe_uri) ? $newsletter_wt_subscribe_uri : '';
    $newsletter_wt_subscribe_ti = isset($newsletter_wt_subscribe_ti) ? $newsletter_wt_subscribe_ti : '';
    $newsletter_wt_blade_uri = isset($newsletter_wt_blade_uri) ? $newsletter_wt_blade_uri : '';
    $newsletter_wt_blade_ti = isset($newsletter_wt_blade_ti) ? $newsletter_wt_blade_ti : '';

    $form = new NewsletterForm('MOZILLA_AND_YOU', $_POST);
    $status = '';
    if ($form->save()) {
        $status = 'success';
    } elseif ($form->error) {
        $status = 'error error-'. $form->error;
    }
?>

<form id="email-form" action="#email-form" method="post">

<ul class="link <?= $status ?>">
    <li id="open-pane" data-wt_uri="<?= $newsletter_wt_blade_uri ?>" data-wt_ti="<?= $newsletter_wt_blade_ti ?>">
        <span id="email-title">
            Keep in touch! <span>Get Monthly News</span>
        </span>
        <div id="email-field" class="field">
            <span class="error-wrapper">
                <input
                    id="email"
                    name="email"
                    type="email"
                    placeholder="Your Email Address"
                    value="<?= $form->get('email') ?>"
                    class="<?= ($form->get('email') == '') ? 'placeholder' : '' ?>">
            </span>
            <a id="email-open"
                href="/<?php echo $lang; ?>/newsletter/"
                        onclick="dcsMultiTrack('DCS.dcssip', 'www.mozilla.com',
                                               'DCS.dcsuri', '/mainstream_newsletter/step1', 
                                               'WT.ti', 'Link: Monthly News - First Step',
                                               'WT.dl', 99,
                                               'WT.nv', 'Content',
                                               'WT.ac', 'Newsletter');">»</a>
        </div>
    </li>
    <li id="form-pane">
        <p class="intro">Sign up to get our monthly newsletter featuring special Mozilla news, Firefox tips & tricks, and more!</p>
        <p class="form-error" id="email-error"><span>Whoops! Be sure to enter a valid email address.</span></p>
        <p class="form-error" id="privacy-error"><span>Please read the Mozilla Privacy Policy and agree by checking the box.</span></p>
        <div id="form-details">

            <div class="field" id="country-field">
                <select id="country" name="country">
                    <option value="">Select country</option>
                    <?php
                        $country = $form->get('country');
                        if (!$country) {
                            $country = 'us';
                        }
                        echo regionsAsOptions($lang, $country);
                    ?>
                </select>
            </div>

            <div class="field" id="format-field">
                <?php
                    $html_format = 'checked="checked"';
                    $text_format = '';
                    if ($form->get('format') == 'text') {
                        $text_format = 'checked="checked"';
                        $html_format = '';
                    }
                ?>
                <div class="field-radios">
                    <span class="radio-wrapper"><input type="radio" name="format" id="html-format" value="html" <?= $html_format?>></span>
                    <label for="html-format">HTML</label>
                    <span class="radio-wrapper"><input type="radio" name="format" id="text-format" value="text" <?= $text_format?>></span>
                    <label for="text-format">Text</label>&nbsp;
                </div>
            </div>

            <div id="privacy-field">
                <?php $checked = $form->get('privacy') ? 'checked="checked"' : '' ?>
                <label for="privacy-check" id="privacy-check-label">
                    <span class="error-wrapper"><input type="checkbox" id="privacy-check" name="privacy" <?= $checked ?>></span> I agree to the <a href="/en-US/privacy-policy">Privacy Policy</a>
                </label>
            </div>

            <input name="submit" type="submit" value="Sign me up!" id="subscribe"
                   onclick="dcsMultiTrack('DCS.dcssip', 'www.mozilla.com',
                            'DCS.dcsuri', '/mainstream_newsletter/signup',
                            'WT.ti', 'Link: Sign me up - Second Step',
                            'WT.dl', 99,
                            'WT.nv', 'Content',
                            'WT.ac', 'Newsletter');">

            <p class="footnote">We will only send you Mozilla-related information.</p>
        </div>

    </li>
    <li id="success-pane">
        <h3>Thanks for Subscribing!</h3>
        <p>We look forward to soon begin sharing tips &amp; tricks on getting the most out of Firefox, as well as exciting news about Mozilla and how we’re working to create a better Web.</p>
    </li>
</ul>

</form>

<?php if ($status == 'success'): ?>
  <script>
    dcsMultiTrack('DCS.dcsuri', '<?= $newsletter_wt_subscribe_uri ?>', 'WT.ti', '<?= $newsletter_wt_subscribe_ti ?>');
  </script>
<?php endif ?>

        <ul class="link social">
            <li id="connect-facebook">
              <a href="http://www.facebook.com/Firefox"
                 onclick="dcsMultiTrack('DCS.dcssip', 'www.facebook.com',
                                        'DCS.dcsuri', '/firefox',
                                        'WT.ti', 'Link: Facebook',
                                        'WT.dl', 99,
                                        'WT.nv', 'Footer',
                                        'WT.ac', 'Facebook');">
                Facebook
              </a>
            </li>
            <li id="connect-twitter">
              <a href="http://twitter.com/firefox"
                 onclick="dcsMultiTrack('DCS.dcssip', 'twitter.com',
                                        'DCS.dcsuri', '/firefox',
                                        'WT.ti', 'Link: Twitter',
                                        'WT.dl', 99,
                                        'WT.nv', 'Footer',
                                        'WT.ac', 'Twitter');">
                Twitter
              </a>
            </li>
        </ul>
    </div>
</div>

<script>// <![CDATA[
    // Add a class to the body tag to alternate promo features
    var class_options = new Array( "default", "thunderbird", "reminderfox", "rockyourfirefox", "live", "participate" );

    if (Math.random) {
        var choice = Math.floor(Math.random() * (class_options.length));

        // Just in case javascript gets carried away...
        choice = ( (choice < class_options.length)  && choice >= 0) ? choice : 0;

        if (document.body.className == '') {
            document.body.className = class_options[choice];
        } else {
            document.body.className += ' '+class_options[choice];
        }
    }
// ]]></script>

<?php

include_once "{$config['file_root']}/{$lang}/includes/footers/3.6/portal-pages.inc.php";

?>
