<?php
    // The $body_* variables are for compatibility with pre-existing css
	$page_title = 'Firefox Web Browser â€” Plugin Check & Updates';
	$body_id    = 'plugin-check';
    $extra_headers = <<<EXTRA_HEADERS
    <link rel="stylesheet" href="{$config['static_prefix']}/style/covehead/plugin-check.css" media="screen" />
EXTRA_HEADERS;
	@include_once "{$config['file_root']}/{$lang}/includes/header-portal-pages.inc.php";
	$url_prefix = $config['url_scheme'] . '://' . $config['server_name'];

function display_badge($size, $code_class='')
{
    global $url_prefix;
	global $lang;
    list($width, $height) = explode('_', $size);
?>
		<div>
		    <img class="web-badge-loading" src="<?php echo $url_prefix ?>/img/covehead/plugincheck/wb/<?php echo $lang ?>/<?php echo $size ?>/loading.png" alt="Clever graphic telling people about PluginChecker" />
         <p><textarea class="web-badge-code <?php echo $code_class ?>" cols="40" rows="6">&lt;a href="<?php echo $url_prefix ?>/<?php echo $lang ?>/plugincheck/"&gt;&lt;img id="mozilla_plugin_checker_badge" src="<?php echo $url_prefix ?>/img/covehead/plugincheck/wb/<?php echo $lang ?>/<?php echo $size ?>/loading.png" width="<?php echo $width ?>" height="<?php echo $height ?>" alt="We can check your plugins and stuff" border="0" /&gt;&lt;/a&gt;&lt;script type=&quot;text/javascript&quot;&gt;var pfsNextImage = &quot;<?php echo $url_prefix ?>/img/covehead/plugincheck/wb/<?php echo $lang ?>/<?php echo $size ?>/safe.png&quot;;var pfsUpdateImage = &quot;<?php echo $url_prefix ?>/img/covehead/plugincheck/wb/<?php echo $lang ?>/<?php echo $size ?>/upyourplug.png&quot;;&lt;/script&gt;&lt;script src="<?php echo $url_prefix ?>/js/plugincheck_badge.js"&gt;&lt;/script&gt;</textarea></p>
		</div>
<?php
}
?>

<div id="download" class="top-right">
    <script src="/js/download.js"></script>
    <?php
        $_options = array('ancillary_links' => true, 'layout' => 'subpage', 'download_parent_override' => 'download', '_include_js' => true, 'download_product' => 'Firefox');
        echo $firefoxDetails->getNoScriptBlockForLocale('en-US', $_options);
        echo $firefoxDetails->getDownloadBlockForLocale('en-US', $_options);
    ?>
</div>

<div id="main-feature">
	<h2>Check Your <span>Plugins</span></h2>
	<p>Keeping your third-party plugins up to date helps Firefox run safely and smoothly.</p>
</div>

<div id="main-content">

	<div id="content-left">
          <div class="blocklisted flash">
            <h3>Missing <span>FLASH&#63;</span></h3>
            <p>For your safety, Firefox has disabled your outdated version of Flash. Please <a href="http://get.adobe.com/flashplayer/">upgrade to the latest version.</a></p>
            <br class="clearfix" />
          </div>
	<div id="legend">
		<ul>
		<li id="old_browser" style="display:none"><strong>Warning, a newer version of your browser is available.</strong> Please upgrade your browser.</li>
		<li id="modern_browsers" style="display:none">This page works best with the latest browsers: Firefox 3.6+, Opera 10.5, Safari 4, Chrome 4, or IE 8</li>
		<li id="exploder" style="display: none">Plugin Check <strong>support for Internet Explorer is limited</strong>. Also use Tools &gt; Manage Addons</li>
		<li><strong><em>Step 1:</em></strong> Click <strong>Update</strong> to update a plugin.</li>
		<li><strong><em>Step 2:</em></strong> <strong>Complete all recommended updates</strong> <em>before</em> restarting your browser.</li>
	</ul>
	</div>

		<noscript>
		<div>
		<h3>Note</h3>
		<p><strong>You have JavaScript disabled</strong> or are using a browser without JavaScript. This Plugin Check page
		   does not work without the awesome power of <strong>JavaScript</strong>. Please enable this Content Preference
		   and reload the page.</p>
		<p>Or disable all your plugins and keep JavaScript disabled... you'd be in good company,
		   that's how <a href="http://lwn.net/Articles/262570/">RMS rolls</a>.</p>
		</div>
		</noscript>

		<table class="status">
			<thead>
				<tr>
					<th>Plugin Details</th>
					<th>Status</th>
					<th class="action">Action</th>
				</tr>
			</thead>
			<tfoot>
				<tr class="link-row">
					<td colspan="3"></td>
				</tr>
			</tfoot>
			<tbody>
				<tr class="link-row">
					<td id="pfs-status" colspan="3"></td>
				</tr>
				<tr id="plugin-template" style="display: none">
					<td>
						<img class="icon" src="<?=$config['static_prefix']?>/img/tignish/plugincheck/icon-flip.png" alt="Plugin Icon" />
						<h4 class="name"><a href="#"></a></h4><span class="version"></span>
					</td>
					<td class="status"><span class="copy"></span></td>
					<td class="action"><a class="button"><span></span></a></td>
				</tr>
			</tbody>
		</table>
        <div id="error-panel" style="display: none">
			<h3>Plugin Finding Service Error</h3>
			<p>We've encountered an error. Please try your request again later.</p>
			<form action="#" method="get"><fieldset><button>Retry</button></fieldset></form></div>
    </div>

        <div id="sidebar">
          <div id="information">
            <h3>Plugin Tips</h3>
            <ul>
              <li><a href="#what-plugin">What is a plugin?</a></li>
              <li><a href="#why-update">Why should I update my plugins?</a></li>
              <li><a href="#firefox-helps">How can Firefox help me?</a></li>
              <li><a href="#list-plugins">Which plugins do I have?</a></li>
              <li><a href="#howto-disable">How do I disable a plugin?</a></li>
            </ul>
          </div>
          <div id="helpus">
            <h3>Help Us Out</h3>
            <ul>
              <li><a href="#web-badge">Grab a badge</a> to <strong>spread the word</strong> about plugins</li>
              <!-- li>If you have plugin information we don't have, <a href="http://plugins.mozilla.org">please let us know</a>.</li -->
              <li>Get <a href='more_info.html'>More Information</a> about this project</li>
            </ul>
          </div>
          <div id="support">
            <h3>Need Help?</h3>
            <ul>
              <li><a href="http://support.mozilla.com">Visit support.mozilla.com</a></li>
              <li><a href="http://support.mozilla.com/<?php echo $lang ?>/kb/Troubleshooting+plugins">Read support articles about plugins</a></li>
            </ul>
          </div>

          <div id="newsletter">
            </p>
            <div>
              <?php
                 $newsletter_snippet = "<p>Subscribe to monthly email updates and keep current with " .
                                       "Mozilla news, including details about new and innovative " .
                                       "plug-ins!</p>";
                 require "{$config['file_root']}/includes/newsletter.inc.php"; 
              ?>
            </div>
          </div>
        </div>

	<div id="information-content" class="clearfix">
		<div class="return-link"><a href="#">Return to Top</a></div>
		<h2>Frequently asked <span>Questions</span></h2>
	
		<div id="column-one">
			<h3 id="what-plugin">What is a plugin?</h3>
			<ul>
                <li>Plugins power <strong>videos, animation and games</strong>.</li>
                <li>They're built <strong>outside of Firefox by companies</strong> like <a href="http://adobe.com/">Adobe Systems</a> and <a href="http://apple.com/">Apple</a>.</li>
                <li>Plugins <strong>don't always update</strong> automatically.</li>
            </ul>

			<h3 id="why-update">Why should I update my plugins?</h3>
			<ul>
                <li>Old plugins can interrupt browsing and <strong>waste your time</strong>.</li>
                <li>Old plugins <strong>increase your risk</strong> for attack by malware, viruses, and other security threats.</li>
                <li><strong>Updated plugins have improvements</strong> that make the web <strong>better and safer</strong> for you.</li>
            </ul>

			<img class="screenshot" src="/img/covehead/plugincheck/screenshot.jpg" alt="" />
		</div>

		<div id="column-two">
			<h3 id="firefox-helps">How can Firefox help me?</h3>
			<p>In the future, Firefox will update plugins for you.  Until then, you should <strong>regularly check this page</strong> and update your plugins to stay safe.</p>

			<h3 id="list-plugins">Which plugins do I have?</h3>
			<p>We automatically detected your plugins above,
                           to <strong>view your installed plugins in Firefox</strong> follow these steps:</p>
            <ol>
                <li>Open the <kbd>Tools</kbd> menu.</li>
                <li>Choose <kbd>Add-ons</kbd>.</li>
                <li>Click the <kbd>plugins</kbd> tab.</li>
            </ol>

            <div class="howto-disable-plugin">
			<h3 id="howto-disable">How do I disable a plugin?</h3>
            <p>In Firefox:</p>
            <ol>
                <li>Open the <kbd>Tools</kbd> menu.</li>
                <li>Choose <kbd>Add-ons</kbd>.</li>
                <li>Click the <kbd>plugins</kbd> tab.</li>
                <li>Click on a plugin in the list.</li>
                <li>Click the <kbd>Disable</kbd> button.</li>
            </ol>
			<p><strong>Caution:</strong> disabling a plugin means that you will <strong>no longer be able to do</strong> certain things. For example, if you disable Flash, you will not be able to watch videos on YouTube.</p>
            </div><!-- /.howto-disable-plugin -->

			<h3 id="more-questions">Have more <span>questions?</span></h3>
			<p><a href="http://support.mozilla.com/">Our support site</a> can help you <a href="http://support.mozilla.com/kb/Popular+Plugins">learn about plugins</a> or <a href="http://support.mozilla.com/kb/Troubleshooting+Plugins">troubleshoot plugin problems</a>.</p>
		</div>
	</div>

<div id="web-badge" class="badge-content clearfix">
	<div class="return-link"><a href="#">Return to Top</a></div>
	<h2>Help us <span>Spread The Word</span></h2>
		
    <div class="left-column">
        <h3 class="web-badge">Spread the Word with a Badge</h3>

        <p>Help protect your friends! With a badge on your site, you can:</p>
        <ul>
            <li>Use JavaScript to <strong>detect plugins</strong></li>
            <li><strong>Warn people</strong> if they have <strong>outdated plugins!</strong></li>
        </ul>

	</div><!-- /left-column -->
	<div class="right-column">
        <h3>How to Use a Badge on Your Site</h3>
        <ol>
			<li><strong>Choose</strong> from the sizes below.</li>
            <li><strong>Copy the code below</strong> the badge.</li>
            <li><strong>Paste it</strong> into your blog or other website.</li>
        </ol>
    </div><!-- /right-column -->

	<div class="left-column clearfix">
	  <?php display_badge('180_150'); ?>
	</div><!-- /left-column -->
	<div class="right-column">
	  <?php display_badge('300_250'); ?>
	</div><!-- /right-column -->
</div>

<div class="clearfix full-column"> 
<?php display_badge('728_90', 'code728'); ?>
</div>

</div>


<?php
/* Bug#535030 TODO: Order we include footer-portal-pages and our plugincheck is sensative.
                    Work on no-conflict jQuery for web badge and no jQuery for moco
   Bug#560762 - jQuery pulled out of stats
*/
$extra_footers = <<<EXTRA_FOOTERS
<script src="/includes/min/min.js?g=js"></script>
<script src="/js/plugincheck.js"></script>

<script>
/* <![CDATA[ */
Pfs.$(document).ready(function(){
	checkPlugins('
EXTRA_FOOTERS;
$extra_footers .= $config['pfs_endpoint']; #from includes/config.inc.php
$extra_footers .= <<<EXTRA_FOOTERS
');
    //TODO make this based on classes AND ids for clearning event handlers
	Pfs.$('.web-badge-code').bind('click.badge', function(){
	  Pfs.$(this).select().unbind('click.badge');
	});
    if (!document.referrer ||
        location.href.indexOf('flash=1') > 0) {
        if (! PluginDetect.getVersion('Flash')) {
            $('.blocklisted.flash').show();
        }
    }
});
/* ]]> */
</script>
EXTRA_FOOTERS;

@include_once "{$config['file_root']}/{$lang}/includes/footer-portal-pages.inc.php";
?>
<!-- script defer src="jquery.qtip-1.0.min.js"></script -->
